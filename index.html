<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Qu·∫£n L√Ω B·ªØa ƒÇn</title>
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1 style="margin-bottom: 0">Qu·∫£n L√Ω B·ªØa ƒÇn</h1>
                <div class="current-time" id="currentTime"></div>
            </div>

            <div class="nav-tabs">
                <button
                    class="nav-tab active"
                    onclick="switchTab('attendance')"
                >
                    <span class="tab-icon">‚úì</span>
                    Ch·∫•m B·ªØa ƒÇn
                </button>
                <button class="nav-tab" onclick="switchTab('statistics')">
                    <span class="tab-icon">üìä</span>
                    Th·ªëng K√™
                </button>
                <button class="nav-tab" onclick="switchTab('settings')">
                    <span class="tab-icon">‚öôÔ∏è</span>
                    C√†i ƒê·∫∑t
                </button>
            </div>
            <div id="attendance" class="tab-content active">
                <div class="date-selector">
                    <input
                        type="date"
                        id="attendanceDate"
                        onchange="loadAttendance()"
                    />
                </div>

                <div class="meal-selector">
                    <button
                        class="meal-btn active"
                        id="lunchBtn"
                        onclick="selectMeal('lunch')"
                    >
                        <span class="meal-icon">üåÖ</span>
                        B·ªØa Tr∆∞a
                    </button>
                    <button
                        class="meal-btn"
                        id="dinnerBtn"
                        onclick="selectMeal('dinner')"
                    >
                        <span class="meal-icon">üåô</span>
                        B·ªØa T·ªëi
                    </button>
                </div>

                <div class="attendance-summary" id="attendanceSummary">
                    <div class="summary-item">
                        <span class="summary-label">C√≥ m·∫∑t:</span>
                        <span class="summary-value" id="presentCount">0</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">V·∫Øng m·∫∑t:</span>
                        <span class="summary-value" id="absentCount">0</span>
                    </div>
                </div>

                <div class="person-list" id="personList"></div>
            </div>
            <div id="statistics" class="tab-content">
                <div class="stats-card">
                    <div class="stats-header">
                        <h3 class="stats-title">Th·ªëng K√™</h3>
                        <div class="stats-type-selector">
                            <button
                                class="stats-type-btn active"
                                onclick="switchStatsType('daily')"
                            >
                                Theo Ng√†y
                            </button>
                            <button
                                class="stats-type-btn"
                                onclick="switchStatsType('monthly')"
                            >
                                Theo Th√°ng
                            </button>
                            <button
                                class="stats-type-btn"
                                onclick="switchStatsType('yearly')"
                            >
                                Theo NƒÉm
                            </button>
                        </div>
                    </div>

                    <div id="dailyStats" class="stats-section active">
                        <div class="stats-controls">
                            <input
                                type="date"
                                class="day-selector"
                                id="dailyDateSelector"
                                onchange="updateDailyStatistics()"
                            />
                            <button
                                class="export-btn"
                                onclick="exportDailyStats()"
                            >
                                Xu·∫•t Excel
                            </button>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="dailyTotalMeals">
                                    0
                                </div>
                                <div class="stat-label">T·ªïng B·ªØa ƒÇn</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="dailyTotalCost">
                                    0ƒë
                                </div>
                                <div class="stat-label">T·ªïng Ti·ªÅn</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="dailyLunchCount">
                                    0
                                </div>
                                <div class="stat-label">B·ªØa Tr∆∞a</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="dailyDinnerCount">
                                    0
                                </div>
                                <div class="stat-label">B·ªØa T·ªëi</div>
                            </div>
                        </div>
                        <div class="person-stats" id="dailyPersonStats"></div>
                        <div class="summary-total">
                            <div>T·ªïng c·ªông ng√†y n√†y</div>
                            <div class="total-amount" id="dailyTotal">0ƒë</div>
                        </div>
                    </div>

                    <div id="monthlyStats" class="stats-section">
                        <div class="stats-controls">
                            <select
                                class="month-selector"
                                id="monthSelector"
                                onchange="updateStatistics()"
                            ></select>
                            <button
                                class="export-btn"
                                onclick="exportMonthlyStats()"
                            >
                                Xu·∫•t Excel
                            </button>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="totalMeals">0</div>
                                <div class="stat-label">T·ªïng B·ªØa ƒÇn</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalCost">0ƒë</div>
                                <div class="stat-label">T·ªïng Ti·ªÅn</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="avgDaily">0</div>
                                <div class="stat-label">TB/Ng√†y</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalPeople">0</div>
                                <div class="stat-label">S·ªë Ng∆∞·ªùi</div>
                            </div>
                        </div>
                        <div class="person-stats" id="personStats"></div>
                        <div class="summary-total">
                            <div>T·ªïng c·ªông th√°ng n√†y</div>
                            <div class="total-amount" id="monthlyTotal">0ƒë</div>
                        </div>
                    </div>

                    <div id="yearlyStats" class="stats-section">
                        <div class="stats-controls">
                            <select
                                class="year-selector"
                                id="yearSelector"
                                onchange="updateYearlyStatistics()"
                            ></select>
                            <button
                                class="export-btn"
                                onclick="exportYearlyStats()"
                            >
                                Xu·∫•t Excel
                            </button>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="yearlyTotalMeals">
                                    0
                                </div>
                                <div class="stat-label">T·ªïng B·ªØa ƒÇn</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="yearlyTotalCost">
                                    0ƒë
                                </div>
                                <div class="stat-label">T·ªïng Ti·ªÅn</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="yearlyAvgMonthly">
                                    0
                                </div>
                                <div class="stat-label">TB/Th√°ng</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="yearlyTotalPeople">
                                    0
                                </div>
                                <div class="stat-label">S·ªë Ng∆∞·ªùi</div>
                            </div>
                        </div>
                        <div class="person-stats" id="yearlyPersonStats"></div>
                        <div class="summary-total">
                            <div>T·ªïng c·ªông nƒÉm n√†y</div>
                            <div class="total-amount" id="yearlyTotal">0ƒë</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="settings" class="tab-content">
                <div class="settings-section">
                    <h3 class="settings-title">Gi√° B·ªØa ƒÇn</h3>
                    <div class="price-group">
                        <label for="lunchPrice">Gi√° b·ªØa tr∆∞a (VNƒê)</label>
                        <input
                            type="number"
                            class="price-input"
                            id="lunchPrice"
                            placeholder="25000"
                        />
                    </div>
                    <div class="price-group">
                        <label for="dinnerPrice">Gi√° b·ªØa t·ªëi (VNƒê)</label>
                        <input
                            type="number"
                            class="price-input"
                            id="dinnerPrice"
                            placeholder="30000"
                        />
                    </div>
                    <button class="save-btn" onclick="savePrices()">
                        L∆∞u C√†i ƒê·∫∑t
                    </button>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">Qu·∫£n L√Ω Danh S√°ch</h3>
                    <div class="add-person-form">
                        <input
                            type="text"
                            id="newPersonName"
                            placeholder="Nh·∫≠p t√™n ng∆∞·ªùi m·ªõi..."
                            class="person-input"
                        />
                        <button class="add-btn" onclick="addPerson()">
                            Th√™m
                        </button>
                    </div>
                    <div class="people-manager" id="peopleManager"></div>
                </div>

                <div class="settings-section">
                    <h3 class="settings-title">Sao L∆∞u & Kh√¥i Ph·ª•c</h3>
                    <div class="backup-controls">
                        <button class="backup-btn" onclick="exportData()">
                            Xu·∫•t D·ªØ Li·ªáu
                        </button>
                        <input
                            type="file"
                            id="importFile"
                            accept=".json"
                            style="display: none"
                            onchange="importData(event)"
                        />
                        <button
                            class="backup-btn"
                            onclick="document.getElementById('importFile').click()"
                        >
                            Nh·∫≠p D·ªØ Li·ªáu
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
        <script src="script.js"></script>
    </body>
</html>
